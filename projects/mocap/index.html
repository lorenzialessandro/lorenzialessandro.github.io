<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Motion Capture | Alessandro Lorenzi </title> <meta name="author" content="Alessandro Lorenzi"> <meta name="description" content="Processing and animating MoCap data using Python, Unreal Engine 5, and Blender"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?b05f9a0b7405d7c8c89c7465593dea81"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?dadeb9c5d1fd12bc8d37475657446863"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?53a094b51ed1d1e025731eb00d240058" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%99%8B%F0%9F%8F%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://lorenzialessandro.github.io/projects/mocap/"> <script src="/assets/js/theme.js?7b1068a1099d4262cace6933e385240d"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?46af317e693b09921dcb92261d123fbc" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Alessandro Lorenzi </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Motion Capture</h1> <p class="post-description">Processing and animating MoCap data using Python, Unreal Engine 5, and Blender</p> </header> <article> <p>This project combines computer vision techniques with state-of-the-art tools to process, analyze, and visualize motion capture (MoCap) data. It addresses key challenges in visualizing human motion, mitigating data inconsistencies, and integrating motion data into virtual environments.</p> <h2 id="key-objectives">Key Objectives</h2> <ol> <li> <strong>Visualization of MoCap Data</strong>: Create dynamic 3D models of skeletons and rigid bodies from various file formats.</li> <li> <strong>Occlusion Handling</strong>: Mitigate flickering and inconsistencies in motion caused by marker loss.</li> <li> <strong>3D-to-2D Projection</strong>: Seamlessly integrate motion data into Unreal Engine 5 for rendering and projection.</li> <li> <strong>Blender Integration</strong>: Enhance data interoperability for advanced neural network and rendering applications.</li> </ol> <h2 id="data-reading-and-3d-visualization">Data Reading and 3D Visualization</h2> <p>Motion capture systems generate large datasets in formats like CSV, BVH, and C3D. This task focused on reading, processing, and visualizing data to represent the structure and motion of skeletons and rigid bodies.</p> <ul> <li> <strong>CSV Files</strong>: Extracted 3D joint coordinates (<code class="language-plaintext highlighter-rouge">x, y, z</code>) and connected them to form a complete skeleton, visualized using Python libraries like Matplotlib.</li> <li> <strong>BVH Files</strong>: Parsed motion data to retrieve joint rotations, bone lengths, and connections, enabling detailed skeletal modeling.</li> <li> <strong>C3D Files</strong>: Extracted marker positions for rigid bodies and visualized their trajectories over time.</li> </ul> <p>The result was a set of interactive 3D plots showcasing skeleton connectivity, bone structures, and marker paths.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <img src="https://github.com/lorenzialessandro/CV-project/raw/main/media/skeleton.gif" title="3D Skeleton Visualization" class="img-fluid rounded z-depth-1"> </div> </div> <hr> <h2 id="flickering-and-occlusion-handling">Flickering and Occlusion Handling</h2> <p>Motion capture often suffers from marker occlusion, leading to flickering or gaps in motion data. To address this, two advanced filtering techniques were implemented:</p> <ul> <li> <strong>Kalman Filter</strong>: A computationally efficient method that predicts and corrects motion states based on linear dynamics, offering smooth and reliable results.</li> <li> <strong>Particle Filter</strong>: A probabilistic technique that models non-linear systems by simulating particles and resampling based on observations.</li> </ul> <p>By comparing the outputs, the Kalman Filter proved more accurate and computationally efficient, though the Particle Filter offered greater flexibility in handling irregular data.<br> <strong>Comparison:</strong></p> <div class="row justify-content-sm-center"> <div class="col-sm mt-3 mt-md-0"> <img src="https://github.com/lorenzialessandro/CV-project/raw/main/media/ragnetto-basic.gif" title="Original Data" class="img-fluid rounded z-depth-1"> </div> <div class="col-sm mt-3 mt-md-0"> <img src="https://github.com/lorenzialessandro/CV-project/raw/main/media/ragnetto-KF.gif" title="Kalman Filter Correction" class="img-fluid rounded z-depth-1"> </div> <div class="col-sm mt-3 mt-md-0"> <img src="https://github.com/lorenzialessandro/CV-project/raw/main/media/ragnetto-PF.gif" title="Particle Filter Correction" class="img-fluid rounded z-depth-1"> </div> </div> <hr> <h2 id="3d-to-2d-projection-in-unreal-engine-5">3D-to-2D Projection in Unreal Engine 5</h2> <p>This task integrated MoCap data into Unreal Engine 5 (UE5) to animate virtual characters and project 3D joint positions onto a 2D image plane. The workflow included:</p> <ol> <li> <strong>Scene Creation</strong>: Actors and cameras were added to a virtual environment using UE5 Blueprints. Animations were retargeted from Adobe Mixamo skeletons.</li> <li> <strong>Coordinate System Alignment</strong>: Transformation matrices were used to convert between UE5’s left-handed and OpenCV’s right-handed coordinate systems.</li> <li> <strong>Projection</strong>: Camera intrinsics were calculated to accurately map 3D joint positions onto 2D camera planes, enabling video rendering of the animated skeleton.</li> </ol> <p>The result was a dynamic scene showcasing precise projection and animation in a controlled virtual environment.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <img src="https://github.com/lorenzialessandro/CV-project/raw/main/media/skeletonProjection.png" title="Unreal Engine 5 Projection" class="img-fluid rounded z-depth-1"> </div> </div> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <img src="https://github.com/lorenzialessandro/CV-project/raw/main/media/scene.png" title="Unreal Engine 5 Projection" class="img-fluid rounded z-depth-1"> </div> </div> <hr> <h2 id="blender-integration">Blender Integration</h2> <p>Blender was utilized to enhance MoCap data visualization and support advanced applications like skeleton-aware neural networks. Using Blender’s Python API, the motion data was seamlessly imported, enabling precise rendering and compatibility with frameworks for animation refinement and style transfer.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <img src="https://github.com/lorenzialessandro/CV-project/raw/main/media/bvhFrame.png" title="Blender Integration" class="img-fluid rounded z-depth-1"> </div> </div> <hr> <h2 id="results-and-achievements">Results and Achievements</h2> <ol> <li>Successfully processed and visualized MoCap data from multiple formats.</li> <li>Mitigated motion flickering using advanced filtering techniques.</li> <li>Integrated motion data into UE5 for animation and projection.</li> <li>Enhanced data compatibility with Blender for future applications.</li> </ol> <hr> <h2 id="resources">Resources</h2> <div class="repositories"> <div class="repo p-2 text-center"> <a href="https://github.com/lorenzialessandro/CV-project" rel="external nofollow noopener" target="_blank"> <img class="repo-img-light w-100" alt="lorenzialessandro/CV-project" src="https://github-readme-stats.vercel.app/api/pin/?username=lorenzialessandro&amp;repo=CV-project&amp;theme=default&amp;show_owner=false&amp;description_lines_count=3"> <img class="repo-img-dark w-100" alt="lorenzialessandro/CV-project" src="https://github-readme-stats.vercel.app/api/pin/?username=lorenzialessandro&amp;repo=CV-project&amp;theme=dark&amp;show_owner=false&amp;description_lines_count=3"> </a> </div> </div> <ul> <li> <strong>Code Repository</strong>: <a href="https://github.com/lorenzialessandro/CV-project/" rel="external nofollow noopener" target="_blank">GitHub Repository</a> </li> <li> <strong>Media Outputs</strong>: <a href="https://www.lucazzola.it/mocap.html" rel="external nofollow noopener" target="_blank">Project Highlights and Videos</a> </li> </ul> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Alessandro Lorenzi. Last updated: February 17, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?b977fe0c21b2118ed853308b1b923969"></script> <script src="/assets/js/no_defer.js?699fa7cbe3b29f831db7d5250ba3203a"></script> <script defer src="/assets/js/common.js?d3a25b46bbd2e0a751a27b173abc6e5f"></script> <script defer src="/assets/js/copy_code.js?d359581efc54b08366f9ef8219e6e511" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?25eff8ff4144a010e4ad7b31403102cf"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> </body> </html>